#!/usr/bin/env bash
# This script installs and configures Nginx to serve a Hello World! page on an Ubuntu machine

# Ensure Nginx is installed
sudo apt-get update -y
sudo apt-get install -y nginx

# Create a simple HTML page
echo 'Hello World!' | sudo tee /var/www/html/index.html

# Set correct permissions
sudo chown -R www-data:www-data /var/www/html
sudo chmod -R 755 /var/www/html

# Configure Nginx to listen on port 80 and serve the HTML page
sudo sed -i "s|root /var/www/html;|root /var/www/html; index index.html;|" /etc/nginx/sites-available/default
sudo sed -i "s|# location / {|location / {|" /etc/nginx/sites-available/default
sudo sed -i "s|# try_files \$uri \$uri/ =404;|try_files \$uri \$uri/ =404;|" /etc/nginx/sites-available/default

# Restart Nginx without using systemctl
sudo service nginx restart
